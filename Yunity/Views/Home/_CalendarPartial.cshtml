@*Views/Calendar/_CalendarPartial.cshtml*@



<div id="calendar"></div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                aspectRatio: 3, // 固定宽高比，让高度更低
                height: '100%', // 允许 CSS 控制高度
                events: function (fetchInfo, success, failure) {
                    fetch(`/Calendar/GetEvents?start=${fetchInfo.startStr}&end=${fetchInfo.endStr}`)
                        .then(response => response.json())
                        .then(data => success(data))
                        .catch(error => failure(error));
                },
                eventContent: function (arg) {
                    return {
                        html: `<div class="fc-event-title">${arg.event.title}</div>`
                    };
                },
            });

        calendar.render();
    });
</script>
